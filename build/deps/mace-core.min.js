/*!
 * Mace 0.0.1
 * copyright: Takenori Nakagawa
 * license: MIT
 */
(function(){"use strict";var e;e=function(){function e(e,t,n){var r;this.editor=e,this.preview=null!=t?t:null,null==n&&(n={}),r=this,this.ace=ace.edit(this.editor),this.ace.getSession().setMode("ace/mode/markdown"),this.ace.setTheme("ace/theme/monokai"),marked.setOptions({renderer:new marked.Renderer,gfm:!0,tables:!0,breaks:!0,pedantic:!1,sanitize:!0,smartLists:!0,smartypants:!1}),null!==this.preview&&(this._render(),this.ace.on("change",function(e){return function(){return e._render()}}(this))),Object.defineProperty(this,"value",{get:function(){return this.ace.getValue()}}),Object.defineProperty(this,"font_size",{get:function(){return this.ace.getFontSize()},set:function(e){return this.ace.setFontSize(e)}})}return e.prototype._render=function(){var e;return e=this.ace.getValue(),marked(e,function(e){return function(t,n){return null!=t&&console.error(t),e.preview.innerHTML=n}}(this))},e.prototype.indent=function(e){var t,n;for(null==e&&(e=1),t=n=0;e>=0?e>n:n>e;t=e>=0?++n:--n)this.ace.indent();return this.ace.focus()},e.prototype.outdent=function(e){var t,n;for(null==e&&(e=1),t=n=0;e>=0?e>n:n>e;t=e>=0?++n:--n)this.ace.blockOutdent();return this.ace.focus()},e.prototype.heading=function(e){var t,n,r,i,o,s,c,a,u,h,l,d,f,p;if(null==e&&(e=1),0>e||e>6)throw new RangeError;for(o=this.ace.getCursorPosition(),s=this.ace.selection.getRange(),this.ace.selection.clearSelection(),0===s.end.column&&s.end.row-s.start.row===1&&s.end.row--,a=s.end.row-s.start.row,t=s.constructor,c=h=d=s.start.row,f=s.end.row;f>=d?f>=h:h>=f;c=f>=d?++h:--h)if(this.ace.moveCursorTo(c,0),this.ace.navigateLineEnd(),i=this.ace.getCursorPosition(),this.ace.selection.addRange(new t(i.row,0,i.row,i.column)),u=this.ace.getCopyText(),this.ace.selection.clearSelection(),this.ace.moveCursorTo(c,0),n=(null!=(p=u.match(/^#+/i))?p[0].length:void 0)||0,n!==e)for(r=l=n;e>=n?e>l:l>e;r=e>=n?++l:--l)e>n?this.ace.insert("#"):this.ace.remove("right");return this.ace.moveCursorTo(o.row,o.column+e-n),this.ace.focus()},e.prototype.link=function(e,t,n,r){var i,o;return null==e&&(e="./"),null==n&&(n=""),null==r&&(r=!1),o=this.ace.getCopyText().split("\n").join(""),t=t||o||"link",n.length>0&&(n=' "'+n+'"'),i=["","!"][+r],this.ace.insert(""+i+"["+t+"]("+e+n+")"),this.ace.focus()},e.prototype.clear=function(e){return null==e&&(e=!1),e?this.ace.setValue(""):this.ace.removeLines()},e}(),this.Mace=e}).call(this);